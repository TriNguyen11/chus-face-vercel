"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{7610:function(e,t,i){i.r(t);var n=i(7437);i(8424);var a=i(2265),o=i(1585),r=i(5175),s=i.n(r),l=i(8023);let h=e=>{let{shapeProps:t,isSelected:i,onSelect:r,onChange:l}=e,h=a.useRef(),d=a.useRef(),[c]=s()("hat.png");return a.useEffect(()=>{i&&(d.current.nodes([h.current]),d.current.getLayer().batchDraw())},[i]),(0,n.jsxs)(o.ZA,{children:[(0,n.jsx)(o.Ee,{image:c,onClick:r,onTap:r,ref:h,...t,draggable:!0,onDragEnd:e=>{l({...t,x:e.target.x(),y:e.target.y()})},rotation:-50,onTransformEnd:e=>{let i=h.current,n=i.scaleX(),a=i.scaleY();i.scaleX(1),i.scaleY(1),l({...t,x:i.x(),y:i.y(),width:Math.max(5,i.width()*n),height:Math.max(i.height()*a)})}}),i&&(0,n.jsx)(o.$T,{ref:d,anchorCornerRadius:20,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(e,t)=>t.width<5||t.height<5?e:t})]})};t.default=()=>{let[e,t]=(0,a.useState)(),[i,r]=(0,a.useState)([]),[s,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)({width:0,height:0}),g=()=>{let e,t;let i=document.getElementById("file-input"),n=document.getElementById("img-preview-id");n.style.position="relative";let a=document.getElementById("img-preview");i.addEventListener("change",async()=>{a.remove(),e&&e.remove(),t&&t.remove(),e=await l.bufferToImage(i.files[0]),n.prepend(e),(t=l.createCanvasFromMedia(e)).id="id-canvas";let o={width:e.width,height:e.height};m({width:e.width,height:e.height}),l.matchDimensions(t,o);let s=await l.detectAllFaces(e).withFaceLandmarks().withFaceDescriptors(),h=l.resizeResults(s,o),d=[];h.forEach((e,t)=>{e.detection.box,document.createElement("img"),d.push({y:e.detection.box.y-e.detection.box.height/4,x:e.detection.box.x+e.detection.box.width/5,width:e.detection.box.width/2,height:e.detection.box.height/2,id:t}),document.createElement("image")}),r(d)})},u=e=>{let i=e.target===e.target.getStage();i&&t(null)};return(0,a.useEffect)(()=>{Promise.all([l.nets.faceRecognitionNet.loadFromUri("models"),l.nets.faceLandmark68Net.loadFromUri("models"),l.nets.ssdMobilenetv1.loadFromUri("models")]).then(()=>g())},[]),(0,n.jsx)("div",{className:"container-2",children:(0,n.jsxs)("div",{id:"img-preview-id",className:"preview",children:[(0,n.jsx)("img",{htmlFor:"file-input",id:"img-preview",src:"/zuno.png"}),(0,n.jsx)("label",{htmlFor:"file-input",children:"Upload Image"}),(0,n.jsx)("input",{accept:"image/*",type:"file",id:"file-input",onChange:()=>{console.log(1)}}),(0,n.jsx)("label",{htmlFor:"",onClick:()=>{d(!1)},children:"crop Image"}),s&&(0,n.jsx)(o.Hf,{className:"",style:{position:"absolute",top:0},id:"container",width:c.width,height:c.height,onMouseDown:u,onTouchStart:u,children:(0,n.jsx)(o.mh,{children:i.map((a,o)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h,{shapeProps:a,isSelected:o===e,onSelect:()=>{t(o)},onChange:e=>{let t=i.slice();t[o]=e,r(t)}},o)}))})})]})})}}}]);